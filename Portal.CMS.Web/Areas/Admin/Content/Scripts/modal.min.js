"use strict";function showModalEditor(n,t){if($("#ContentEditor").length==0){var i=[];i.push('<div class="modal" id="ContentEditor" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">');i.push('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;<\/span><span class="sr-only">Close<\/span><\/button><h4 class="modal-title">Edit content<\/h4><\/div>');i.push('<div class="modal-data">');i.push('<div class="modal-body"><\/div>');i.push("<\/div><\/div><\/div><\/div>");$("body").append(i.join(""))}$("#ContentEditor .modal-title").text(n);setModalEditorContent("<p>Loading Please wait...<\/p>");$("#ContentEditor").modal("show");$.ajax({type:"GET",url:t,cache:!1,success:function(n){setModalEditorContent(n);$("legend").remove()},error:function(){$("#ContentEditor .modal-body").html("<p>An error occurred. Please try again.<\/p>")}});return}function setModalEditorContent(n){if(~n.indexOf("modal-footer"))$("#ContentEditor .modal-data").html(n);else{var t=[];t.push('<div class="modal-body">'+n+"<\/div>");$("#ContentEditor .modal-data").html(t.join(""))}$("#ContentEditor .datepicker").length>0&&$("#ContentEditor .datepicker").each(function(){$(this).datepicker({format:"yyyy-mm-dd",weekStart:1,startView:1,autoclose:!0})});bindModalEditor()}function bindModalEditor(){if($("#ContentEditor .tag-editor").length>0&&loadTags(),$("#ContentEditor .refresh-page").length>0)$("#ContentEditor .refresh-page").on("click",function(n){n.preventDefault();window.location.reload()});if($("#ContentEditor a.switch-modal").length>0)$("#ContentEditor a.switch-modal").on("click",function(n){n.preventDefault();setModalEditorContent("<p>Please wait...<\/p>");$.ajax({type:"GET",url:$(this).attr("href"),cache:!1,success:function(n){setModalEditorContent(n)},error:function(){$("#ContentEditor .modal-data").html("<p>An error occurred.<\/p>")}})});$("#ContentEditor form").submit(function(n){n.preventDefault();var i=$(this).attr("method"),r=$(this).attr("action"),t;if($(this).find('input[type="file"]').length>0){if(window.FormData===null){alert("Your browser does not support this admin feature. Please update to a modern browser.");return}t=new FormData;$(this).find('input[type!="file"]').each(function(){t.append($(this).attr("name"),$(this).val())});$(this).find("select").each(function(){t.append($(this).attr("name"),$(this).val())});$(this).find('input[type="file"]').each(function(){t.append($(this).attr("name"),$(this)[0].files[0])});$.ajax({type:i,url:r,cache:!1,contentType:!1,processData:!1,data:t,beforeSend:function(){setModalEditorContent("<p>Please wait...<\/p>")},success:function(n){n=="Refresh"?window.location.reload():setModalEditorContent(n)},error:function(){$("#ContentEditor .modal-data").html("<p>An error occurred.<\/p>")}})}else t=$(this).serialize(),$.ajax({type:i,url:r,cache:!1,data:t,beforeSend:function(){setModalEditorContent("<p>Please wait...<\/p>")},success:function(n){n=="Refresh"?window.location.reload():n=="Setup"?showModalEditor("Setup Portal CMS","/Admin/Settings/Setup"):setModalEditorContent(n)},error:function(){$("#ContentEditor .modal-data").html("<p>An error occurred.<\/p>")}});return})}$(document).ready(function(){$("body").on("click",".launch-modal",function(n){n.preventDefault();showModalEditor($(this).data("title"),$(this).attr("href"))})});